{"level":30,"time":1746806131549,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746806249372,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746806249407,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746806249408,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746806251873,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746806252747,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 5 đặc điểm của món ăn phù hợp khi một người đang cảm thấy hạnh phúc:\n\nNgọt ngào, màu sắc tươi sáng, hương vị hấp dẫn, trình bày đẹp mắt, dễ chia sẻ."}
{"level":50,"time":1746806258327,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Error processing chunk:"}
{"level":50,"time":1746806264087,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Error processing chunk:"}
{"level":30,"time":1746806264087,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Returning 0 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746806293077,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address for weather suggestions: \"Đà Nẵng, Việt Nam\""}
{"level":30,"time":1746806293081,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address: \"Đà Nẵng, Việt Nam\" using Nominatim: https://nominatim.openstreetmap.org/search?q=%C4%90%C3%A0+N%E1%BA%B5ng%2C+Vi%E1%BB%87t+Nam&format=json&limit=1&addressdetails=1"}
{"level":30,"time":1746806293911,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Geocoded \"Đà Nẵng, Việt Nam\" to: Thành phố Đà Nẵng, Việt Nam (16.068, 108.212)"}
{"level":30,"time":1746806293911,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Fetching weather data from Open-Meteo: https://api.open-meteo.com/v1/forecast?latitude=16.068&longitude=108.212&hourly=temperature_2m%2Cweathercode&current=temperature_2m%2Cweathercode&timezone=Asia%2FHo_Chi_Minh&forecast_days=1"}
{"level":30,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByWeather AI flow."}
{"level":30,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByWeather function."}
{"level":30,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"genAI object seems valid."}
{"level":30,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to get Gemini model (gemini-1.5-flash-latest)..."}
{"level":30,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Successfully got Gemini model."}
{"level":30,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Starting to map food items from localStorage for prompt..."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 2 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 18 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 22 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 28 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 29 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 35 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 44 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 53 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 59 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 64 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 68 due to missing or invalid name."}
{"level":40,"time":1746806294666,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 77 due to missing or invalid name."}
{"level":40,"time":1746806294667,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 136 due to missing or invalid name."}
{"level":40,"time":1746806294667,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 160 due to missing or invalid name."}
{"level":40,"time":1746806294667,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 167 due to missing or invalid name."}
{"level":40,"time":1746806294667,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 172 due to missing or invalid name."}
{"level":40,"time":1746806294667,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 191 due to missing or invalid name."}
{"level":30,"time":1746806294668,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Successfully mapped food items for prompt."}
{"level":30,"time":1746806294669,"pid":4784,"hostname":"LAPTOP-7O541UFM","message":"Calling Gemini for weather-based food suggestions.","weather":{"temperature":28,"conditionCode":3},"foodItemsCount":200}
{"level":30,"time":1746806294669,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Preparing generation config and safety settings for Gemini."}
{"level":30,"time":1746806304985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Received response from Gemini."}
{"level":30,"time":1746806304985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to parse Gemini response text as JSON."}
{"level":30,"time":1746806304985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Successfully parsed Gemini response."}
{"level":30,"time":1746806304985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Successfully received 10 suggestions from Gemini."}
{"level":30,"time":1746806304985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Calling getWeatherExplanation AI flow."}
{"level":30,"time":1746806304985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Calling Gemini for weather explanation."}
{"level":30,"time":1746806305990,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Received weather explanation from Gemini."}
{"level":30,"time":1746806333019,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746806333019,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746806333019,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746806333024,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746806493985,"pid":4784,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746880896441,"pid":2468,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746881958332,"pid":15848,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746882217926,"pid":15848,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746884378637,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746884440769,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746884440773,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746884440782,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746884440783,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746884443881,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: neutral"}
{"level":30,"time":1746884444623,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3-5 đặc điểm của món ăn phù hợp với người đang cảm thấy neutral:\n\nDễ tiêu, không quá nhiều gia vị, hương vị quen thuộc, cân bằng dinh dưỡng."}
{"level":50,"time":1746884450128,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Error processing chunk:"}
{"level":30,"time":1746884456211,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746884456211,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 3 emotion-based food suggestions for emotion: neutral."}
{"level":30,"time":1746884475075,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address for weather suggestions: \"Hồ Chí Minh, Việt Nam\""}
{"level":30,"time":1746884475075,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address: \"Hồ Chí Minh, Việt Nam\" using Nominatim: https://nominatim.openstreetmap.org/search?q=H%E1%BB%93+Ch%C3%AD+Minh%2C+Vi%E1%BB%87t+Nam&format=json&limit=1&addressdetails=1"}
{"level":30,"time":1746884475793,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Geocoded \"Hồ Chí Minh, Việt Nam\" to: Thành phố Hồ Chí Minh, Việt Nam (10.7763897, 106.7011391)"}
{"level":30,"time":1746884475793,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Fetching weather data from Open-Meteo: https://api.open-meteo.com/v1/forecast?latitude=10.7763897&longitude=106.7011391&hourly=temperature_2m%2Cweathercode&current=temperature_2m%2Cweathercode&timezone=Asia%2FHo_Chi_Minh&forecast_days=1"}
{"level":30,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByWeather AI flow."}
{"level":30,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByWeather function."}
{"level":30,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"genAI object seems valid."}
{"level":30,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to get Gemini model (gemini-1.5-flash-latest)..."}
{"level":30,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully got Gemini model."}
{"level":30,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Starting to map food items from localStorage for prompt..."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 2 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 18 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 22 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 28 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 29 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 35 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 44 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 53 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 59 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 64 due to missing or invalid name."}
{"level":40,"time":1746884476494,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 68 due to missing or invalid name."}
{"level":40,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 77 due to missing or invalid name."}
{"level":40,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 136 due to missing or invalid name."}
{"level":40,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 160 due to missing or invalid name."}
{"level":40,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 167 due to missing or invalid name."}
{"level":40,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 172 due to missing or invalid name."}
{"level":40,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 191 due to missing or invalid name."}
{"level":30,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully mapped food items for prompt."}
{"level":30,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","message":"Calling Gemini for weather-based food suggestions.","weather":{"temperature":28.1,"conditionCode":80},"foodItemsCount":200}
{"level":30,"time":1746884476495,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Preparing generation config and safety settings for Gemini."}
{"level":30,"time":1746884485390,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received response from Gemini."}
{"level":30,"time":1746884485390,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to parse Gemini response text as JSON."}
{"level":30,"time":1746884485390,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully parsed Gemini response."}
{"level":30,"time":1746884485390,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully received 10 suggestions from Gemini."}
{"level":30,"time":1746884485390,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling getWeatherExplanation AI flow."}
{"level":30,"time":1746884485390,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling Gemini for weather explanation."}
{"level":30,"time":1746884486244,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received weather explanation from Gemini."}
{"level":30,"time":1746884506250,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746884506250,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746884506251,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746884506259,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746884689433,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746885213352,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746885309725,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746885309728,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746885309728,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746885312488,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746885313478,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3-5 đặc điểm của món ăn phù hợp khi một người đang cảm thấy vui vẻ, hạnh phúc:\n\nNgọt ngào, màu sắc tươi sáng, trình bày hấp dẫn, hương vị thơm ngon, dễ ăn/dễ chia sẻ."}
{"level":30,"time":1746885321485,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746885321485,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 7 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746885341366,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address for weather suggestions: \"Hồ Chí Minh, Việt Nam\""}
{"level":30,"time":1746885341366,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address: \"Hồ Chí Minh, Việt Nam\" using Nominatim: https://nominatim.openstreetmap.org/search?q=H%E1%BB%93+Ch%C3%AD+Minh%2C+Vi%E1%BB%87t+Nam&format=json&limit=1&addressdetails=1"}
{"level":30,"time":1746885342158,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Geocoded \"Hồ Chí Minh, Việt Nam\" to: Thành phố Hồ Chí Minh, Việt Nam (10.7763897, 106.7011391)"}
{"level":30,"time":1746885342159,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Fetching weather data from Open-Meteo: https://api.open-meteo.com/v1/forecast?latitude=10.7763897&longitude=106.7011391&hourly=temperature_2m%2Cweathercode&current=temperature_2m%2Cweathercode&timezone=Asia%2FHo_Chi_Minh&forecast_days=1"}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByWeather AI flow."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByWeather function."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"genAI object seems valid."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to get Gemini model (gemini-1.5-flash-latest)..."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully got Gemini model."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Starting to map food items from localStorage for prompt..."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully mapped food items for prompt."}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","message":"Calling Gemini for weather-based food suggestions.","weather":{"temperature":28,"conditionCode":80},"foodItemsCount":44}
{"level":30,"time":1746885342928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Preparing generation config and safety settings for Gemini."}
{"level":30,"time":1746885357506,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received response from Gemini."}
{"level":30,"time":1746885357506,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to parse Gemini response text as JSON."}
{"level":30,"time":1746885357506,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully parsed Gemini response."}
{"level":30,"time":1746885357506,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Successfully received 10 suggestions from Gemini."}
{"level":30,"time":1746885357506,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling getWeatherExplanation AI flow."}
{"level":30,"time":1746885357506,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling Gemini for weather explanation."}
{"level":30,"time":1746885358299,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received weather explanation from Gemini."}
{"level":30,"time":1746885410691,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746885410691,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746885410691,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746885410696,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746885544360,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746892980213,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746893018263,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746893069496,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746893167067,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746893179941,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746893179976,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746893179977,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746893179977,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746893179991,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746893368564,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746893477683,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746893477702,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746893477702,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746893479850,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: neutral"}
{"level":30,"time":1746893480575,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3 đặc điểm của món ăn phù hợp cho một người đang cảm thấy neutral:\n\nDễ tiêu, không quá nồng, hương vị quen thuộc."}
{"level":30,"time":1746893489842,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746893489842,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 5 emotion-based food suggestions for emotion: neutral."}
{"level":30,"time":1746893823004,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746893834037,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746893834059,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746893834059,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746893836243,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746893837053,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Ngọt ngào, màu sắc tươi sáng, có hương thơm dễ chịu, trình bày hấp dẫn, giòn tan hoặc mềm mại tan chảy."}
{"level":30,"time":1746893845981,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746893845981,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 6 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746893877434,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746893877456,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746893877456,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746893879559,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746893880437,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3-5 đặc điểm của món ăn phù hợp với một người đang cảm thấy vui vẻ, hạnh phúc:\n\nNgọt ngào, màu sắc tươi sáng, hương vị thơm ngon hấp dẫn, trình bày đẹp mắt, dễ chia sẻ."}
{"level":50,"time":1746893886128,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Error processing chunk:"}
{"level":30,"time":1746893890803,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746893890803,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 3 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746893899157,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Synthesizer with input: \"helu\" (WebSearch: true, DisplayImages: none)"}
{"level":30,"time":1746893899157,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Web search enabled. Searching DuckDuckGo for: \"helu\""}
{"level":30,"time":1746893899157,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[DuckDuckGo Service] Searching for: \"helu\" (max 5 results)"}
{"level":50,"time":1746893899928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[DuckDuckGo Service] Error during search:"}
{"level":30,"time":1746893899928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"No search results found, skipping RAG."}
{"level":30,"time":1746893899928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Executing General Chat Flow (Analysis + Synthesis)..."}
{"level":30,"time":1746893899928,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"No analysis agents specified for general chat flow."}
{"level":30,"time":1746893899929,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Synthesizer] Synthesizing results for input: \"helu\", Display Images: false"}
{"level":30,"time":1746893906383,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Synthesizer with input: \"Helu\" (WebSearch: true, DisplayImages: inline)"}
{"level":30,"time":1746893906383,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Web search enabled. Searching DuckDuckGo for: \"Helu\""}
{"level":30,"time":1746893906383,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[DuckDuckGo Service] Searching for: \"Helu\" (max 5 results)"}
{"level":50,"time":1746893907099,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[DuckDuckGo Service] Error during search:"}
{"level":30,"time":1746893907099,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"No search results found, skipping RAG."}
{"level":30,"time":1746893907099,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Executing General Chat Flow (Analysis + Synthesis)..."}
{"level":30,"time":1746893907099,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"No analysis agents specified for general chat flow."}
{"level":30,"time":1746893907099,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Synthesizer] Synthesizing results for input: \"Helu\", Display Images: true"}
{"level":30,"time":1746893907994,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Synthesizer] Attempting to identify and fetch images for inline display..."}
{"level":30,"time":1746893907994,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Synthesizer] Potential food names identified: Chào, Rất, Bạn"}
{"level":30,"time":1746893907995,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Attempting to find image URL for: \"Chào\" (Original: \"Chào\")"}
{"level":30,"time":1746893907995,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Performing fallback image search for: Chào món ăn"}
{"level":30,"time":1746893907996,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Attempting to find image URL for: \"Rất\" (Original: \"Rất\")"}
{"level":30,"time":1746893907996,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Performing fallback image search for: Rất món ăn"}
{"level":30,"time":1746893907999,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Attempting to find image URL for: \"Bạn\" (Original: \"Bạn\")"}
{"level":30,"time":1746893907999,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Performing fallback image search for: Bạn món ăn"}
{"level":50,"time":1746893908407,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Error during fallback image search for Bạn món ăn:"}
{"level":30,"time":1746893908407,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Fallback to Pexels search for: Bạn food"}
{"level":50,"time":1746893908575,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Error during fallback image search for Rất món ăn:"}
{"level":30,"time":1746893908575,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Fallback to Pexels search for: Rất food"}
{"level":30,"time":1746893908802,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Found image via search: https://cdn.tgdd.vn/2020/10/CookProduct/68-1200x676.jpg"}
{"level":30,"time":1746893909703,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Found image via Pexels: https://images.pexels.com/photos/6613959/pexels-photo-6613959.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"}
{"level":30,"time":1746893909839,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[getImageUrlForMobi] Found image via Pexels: https://images.pexels.com/photos/2189599/pexels-photo-2189599.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"}
{"level":30,"time":1746893909840,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Synthesizer] Fetched 3 images for inline display."}
{"level":30,"time":1746893921201,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746893921217,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746893921217,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746893923977,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746893924786,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3-5 đặc điểm của món ăn phù hợp khi một người đang cảm thấy vui vẻ, hạnh phúc:\n\nNgọt ngào, màu sắc tươi sáng, trình bày đẹp mắt, hương vị đậm đà, dễ ăn"}
{"level":50,"time":1746893930061,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Error processing chunk:"}
{"level":30,"time":1746893935427,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746893935428,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 4 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746894154985,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746894155004,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746894155005,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746894157395,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746894158215,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Ngọt ngào, màu sắc tươi sáng, trình bày hấp dẫn, hương thơm dễ chịu, cảm giác giòn tan hoặc mềm mại tan chảy."}
{"level":30,"time":1746894165600,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746894165601,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 5 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746894180136,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746894191013,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746894191039,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746894191039,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746894194044,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: nervous"}
{"level":30,"time":1746894194842,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3 đặc điểm của món ăn phù hợp cho một người đang cảm thấy nervous:\n\nDễ tiêu hóa, ấm bụng, hương vị nhẹ nhàng"}
{"level":50,"time":1746894204736,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Error processing chunk:"}
{"level":30,"time":1746894206174,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746894206174,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 4 emotion-based food suggestions for emotion: nervous."}
{"level":30,"time":1746894308623,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746894362645,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746894504328,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746894508669,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746894508709,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746894508710,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746894510990,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746894511772,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Ngọt ngào, màu sắc tươi sáng, trình bày hấp dẫn, hương thơm dễ chịu, cảm giác giòn tan hoặc mềm mại."}
{"level":30,"time":1746894519995,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746894519995,"pid":7992,"hostname":"LAPTOP-7O541UFM","msg":"Returning 6 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746894669111,"pid":18480,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746927915027,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746927973135,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746927973151,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746927973180,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746927973181,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746927975628,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746927976429,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Ngọt ngào, màu sắc tươi sáng, hương thơm hấp dẫn, dễ ăn/dễ nhai, trình bày đẹp mắt."}
{"level":30,"time":1746927984796,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746927984796,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Returning 5 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746928005960,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address for weather suggestions: \"Hồ Chí Minh, Việt Nam\""}
{"level":30,"time":1746928005962,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address: \"Hồ Chí Minh, Việt Nam\" using Nominatim: https://nominatim.openstreetmap.org/search?q=H%E1%BB%93+Ch%C3%AD+Minh%2C+Vi%E1%BB%87t+Nam&format=json&limit=1&addressdetails=1"}
{"level":30,"time":1746928006784,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Geocoded \"Hồ Chí Minh, Việt Nam\" to: Thành phố Hồ Chí Minh, Việt Nam (10.7763897, 106.7011391)"}
{"level":30,"time":1746928006785,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Fetching weather data from Open-Meteo: https://api.open-meteo.com/v1/forecast?latitude=10.7763897&longitude=106.7011391&hourly=temperature_2m%2Cweathercode&current=temperature_2m%2Cweathercode&timezone=Asia%2FHo_Chi_Minh&forecast_days=1"}
{"level":30,"time":1746928007550,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByWeather AI flow."}
{"level":30,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByWeather function."}
{"level":30,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"genAI object seems valid."}
{"level":30,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to get Gemini model (gemini-1.5-flash-latest)..."}
{"level":30,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully got Gemini model."}
{"level":30,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Starting to map food items from localStorage for prompt..."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 7 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 16 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 20 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 32 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 38 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 39 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 43 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 54 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 60 due to missing or invalid name."}
{"level":40,"time":1746928007551,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 67 due to missing or invalid name."}
{"level":40,"time":1746928007552,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 70 due to missing or invalid name."}
{"level":40,"time":1746928007552,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 95 due to missing or invalid name."}
{"level":40,"time":1746928007552,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 150 due to missing or invalid name."}
{"level":40,"time":1746928007552,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 194 due to missing or invalid name."}
{"level":30,"time":1746928007553,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully mapped food items for prompt."}
{"level":30,"time":1746928007553,"pid":2040,"hostname":"LAPTOP-7O541UFM","message":"Calling Gemini for weather-based food suggestions.","weather":{"temperature":29.1,"conditionCode":3},"foodItemsCount":200}
{"level":30,"time":1746928007553,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Preparing generation config and safety settings for Gemini."}
{"level":30,"time":1746928018793,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received response from Gemini."}
{"level":30,"time":1746928018793,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to parse Gemini response text as JSON."}
{"level":30,"time":1746928018793,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully parsed Gemini response."}
{"level":30,"time":1746928018793,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully received 10 suggestions from Gemini."}
{"level":30,"time":1746928018793,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling getWeatherExplanation AI flow."}
{"level":30,"time":1746928018794,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling Gemini for weather explanation."}
{"level":30,"time":1746928019581,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received weather explanation from Gemini."}
{"level":30,"time":1746928046058,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"an chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746928046058,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746928046059,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"an chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746928046076,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context and detailed item instructions..."}
{"level":50,"time":1746928126474,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Error:"}
{"level":50,"time":1746928143024,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Fallback raw output:"}
{"level":30,"time":1746928157627,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"Ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746928157627,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746928157627,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"Ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746928157633,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context and detailed item instructions..."}
{"level":50,"time":1746928237110,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Error:"}
{"level":50,"time":1746928253630,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Fallback raw output:"}
{"level":30,"time":1746928277131,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746928277131,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746928277131,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746928277134,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context and detailed item instructions..."}
{"level":50,"time":1746928357028,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Error:"}
{"level":50,"time":1746928373732,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Fallback raw output:"}
{"level":30,"time":1746928625596,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746928625596,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746928625596,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746928625601,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context and detailed item instructions..."}
{"level":50,"time":1746928704201,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Error:"}
{"level":50,"time":1746928715965,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Fallback raw output:"}
{"level":30,"time":1746928785829,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746928799538,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746928799573,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746928799573,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746928799574,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746928799588,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746928956015,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746929550633,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746929614250,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746929647500,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746929647520,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746929647564,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746929647565,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746929650697,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746929651609,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Khi đang cảm thấy hạnh phúc, món ăn phù hợp có thể có những đặc điểm sau:\n\nNgọt ngào, màu sắc tươi sáng, trình bày đẹp mắt, hương vị thơm ngon, dễ ăn."}
{"level":30,"time":1746929658699,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746929658699,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Returning 10 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746929712600,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746929712624,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address for weather suggestions: \"Hồ Chí Minh, Việt Nam\""}
{"level":30,"time":1746929712626,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address: \"Hồ Chí Minh, Việt Nam\" using Nominatim: https://nominatim.openstreetmap.org/search?q=H%E1%BB%93+Ch%C3%AD+Minh%2C+Vi%E1%BB%87t+Nam&format=json&limit=1&addressdetails=1"}
{"level":30,"time":1746929713645,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Geocoded \"Hồ Chí Minh, Việt Nam\" to: Thành phố Hồ Chí Minh, Việt Nam (10.7763897, 106.7011391)"}
{"level":30,"time":1746929713646,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Fetching weather data from Open-Meteo: https://api.open-meteo.com/v1/forecast?latitude=10.7763897&longitude=106.7011391&hourly=temperature_2m%2Cweathercode&current=temperature_2m%2Cweathercode&timezone=Asia%2FHo_Chi_Minh&forecast_days=1"}
{"level":30,"time":1746929714344,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByWeather AI flow."}
{"level":30,"time":1746929714345,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByWeather function."}
{"level":30,"time":1746929714345,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"genAI object seems valid."}
{"level":30,"time":1746929714345,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to get Gemini model (gemini-1.5-flash-latest)..."}
{"level":30,"time":1746929714345,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully got Gemini model."}
{"level":30,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Starting to map food items from localStorage for prompt..."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 7 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 16 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 20 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 32 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 38 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 39 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 43 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 54 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 60 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 67 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 70 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 95 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 150 due to missing or invalid name."}
{"level":40,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Skipping food item at index 194 due to missing or invalid name."}
{"level":30,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully mapped food items for prompt."}
{"level":30,"time":1746929714346,"pid":2040,"hostname":"LAPTOP-7O541UFM","message":"Calling Gemini for weather-based food suggestions.","weather":{"temperature":29.6,"conditionCode":3},"foodItemsCount":200}
{"level":30,"time":1746929714347,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Preparing generation config and safety settings for Gemini."}
{"level":30,"time":1746929720341,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received response from Gemini."}
{"level":30,"time":1746929720341,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to parse Gemini response text as JSON for weather suggestions."}
{"level":30,"time":1746929720341,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Successfully parsed Gemini response for weather suggestions."}
{"level":30,"time":1746929720342,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling getWeatherExplanation AI flow."}
{"level":30,"time":1746929720342,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling Gemini for weather explanation."}
{"level":30,"time":1746929721075,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received weather explanation from Gemini."}
{"level":30,"time":1746930177532,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746930283086,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746930283096,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746930283096,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746930287388,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746930288215,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 5 đặc điểm của món ăn phù hợp với một người đang cảm thấy hạnh phúc:\n\nNgon miệng, bắt mắt, dễ ăn, hương vị tươi mới, trình bày đẹp."}
{"level":30,"time":1746930295761,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746930295761,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Returning 10 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746930360900,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"an chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746930360901,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746930360901,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"an chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746930360910,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746930528460,"pid":2040,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746941740362,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746941740384,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746941740447,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746941740451,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746941743334,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746941744290,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Vâng, khi một người đang cảm thấy vui vẻ, những món ăn phù hợp có thể có những đặc điểm sau:\n\nNgọt ngào, màu sắc tươi sáng, hương vị thơm ngon dễ chịu, trình bày đẹp mắt, dễ chia sẻ."}
{"level":30,"time":1746941751286,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746941751286,"pid":17468,"hostname":"LAPTOP-7O541UFM","msg":"Returning 10 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746954094136,"pid":14424,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954094073,"pid":12712,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954094664,"pid":20484,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954094681,"pid":13588,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746954094682,"pid":13588,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746954094792,"pid":13588,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
{"level":30,"time":1746954094928,"pid":6616,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954104399,"pid":17868,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954105165,"pid":21640,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954105377,"pid":21640,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746954105626,"pid":21640,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746954105691,"pid":21640,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
{"level":30,"time":1746954281049,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954279976,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746954280259,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746954280299,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
{"level":30,"time":1746954552103,"pid":23440,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954552515,"pid":4384,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954552581,"pid":22452,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954553093,"pid":3752,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954552771,"pid":9444,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746954552771,"pid":9444,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746954552965,"pid":9444,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
{"level":30,"time":1746954570397,"pid":10608,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746954571270,"pid":15212,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746954571271,"pid":15212,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746954571355,"pid":15212,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
{"level":30,"time":1746954571869,"pid":15212,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746955301951,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Received request for emotion-based food suggestions."}
{"level":30,"time":1746955301953,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByEmotion flow..."}
{"level":30,"time":1746955301954,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByEmotion function."}
{"level":30,"time":1746955303972,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Detected emotion: happy"}
{"level":30,"time":1746955304975,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Generated food characteristics: Dưới đây là 3-5 đặc điểm của món ăn phù hợp với một người đang cảm thấy vui vẻ, hạnh phúc:\n\nNgọt ngào, màu sắc tươi sáng, trình bày đẹp mắt, có hương vị mới lạ hoặc gợi nhớ kỷ niệm vui, dễ ăn."}
{"level":30,"time":1746955311973,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Generated explanation for emotion-based suggestions using detected emotion and characteristics."}
{"level":30,"time":1746955311973,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Returning 10 emotion-based food suggestions for emotion: happy."}
{"level":30,"time":1746955328621,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address for weather suggestions: \"Hồ Chí Minh, Việt Nam\""}
{"level":30,"time":1746955328622,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Geocoding address: \"Hồ Chí Minh, Việt Nam\" using Nominatim: https://nominatim.openstreetmap.org/search?q=H%E1%BB%93+Ch%C3%AD+Minh%2C+Vi%E1%BB%87t+Nam&format=json&limit=1&addressdetails=1"}
{"level":30,"time":1746955329353,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Geocoded \"Hồ Chí Minh, Việt Nam\" to: Thành phố Hồ Chí Minh, Việt Nam (10.7763897, 106.7011391)"}
{"level":30,"time":1746955329354,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Fetching weather data from Open-Meteo: https://api.open-meteo.com/v1/forecast?latitude=10.7763897&longitude=106.7011391&hourly=temperature_2m%2Cweathercode&current=temperature_2m%2Cweathercode&timezone=Asia%2FHo_Chi_Minh&forecast_days=1"}
{"level":30,"time":1746955330055,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Calling suggestFoodByWeather AI flow."}
{"level":30,"time":1746955330055,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Entering suggestFoodByWeather function."}
{"level":30,"time":1746955330055,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"genAI object seems valid."}
{"level":30,"time":1746955330055,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to get Gemini model (gemini-1.5-flash-latest)..."}
{"level":30,"time":1746955330056,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Successfully got Gemini model."}
{"level":30,"time":1746955330056,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Starting to map food items from localStorage for prompt..."}
{"level":30,"time":1746955330056,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Successfully mapped food items for prompt."}
{"level":30,"time":1746955330056,"pid":9132,"hostname":"LAPTOP-7O541UFM","message":"Calling Gemini for weather-based food suggestions.","weather":{"temperature":32.8,"conditionCode":3},"foodItemsCount":44}
{"level":30,"time":1746955330056,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Preparing generation config and safety settings for Gemini."}
{"level":30,"time":1746955334791,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Received response from Gemini."}
{"level":30,"time":1746955334791,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Attempting to parse Gemini response text as JSON for weather suggestions."}
{"level":30,"time":1746955334791,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Successfully parsed Gemini response for weather suggestions."}
{"level":30,"time":1746955334791,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Calling getWeatherExplanation AI flow."}
{"level":30,"time":1746955334791,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Calling Gemini for weather explanation."}
{"level":30,"time":1746955335660,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Received weather explanation from Gemini."}
{"level":30,"time":1746955349105,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Received request for agents: Menu Generator with input: \"ăn chay\" (WebSearch: false, DisplayImages: inline)"}
{"level":30,"time":1746955349105,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"Executing Menu Generator Flow..."}
{"level":30,"time":1746955349106,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Processing input: \"ăn chay\", Timeframe: daily, Display Images: false"}
{"level":30,"time":1746955349125,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Invoking LLM chain with RAG context..."}
{"level":30,"time":1746955458367,"pid":9132,"hostname":"LAPTOP-7O541UFM","msg":"[Agent: Menu Generator] Parsed LLM Output."}
{"level":30,"time":1746959517038,"pid":15060,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960132598,"pid":27644,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960133529,"pid":18768,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960132884,"pid":27320,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960133085,"pid":24404,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960133833,"pid":27096,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746960133833,"pid":27096,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746960133969,"pid":27096,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
{"level":30,"time":1746960133581,"pid":27316,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960151123,"pid":26916,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960151941,"pid":23128,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":30,"time":1746960152556,"pid":23128,"hostname":"LAPTOP-7O541UFM","msg":"Server logger initialized successfully."}
{"level":40,"time":1746960152834,"pid":23128,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] GOOGLE_APPLICATION_CREDENTIALS environment variable is not set. Google Cloud TTS will likely fail."}
{"level":30,"time":1746960152939,"pid":23128,"hostname":"LAPTOP-7O541UFM","msg":"[TTS API Startup] Google Cloud Text-to-Speech client initialized successfully."}
